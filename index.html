<!DOCTYPE html>









<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>è…¾è®¯ä¼šè®®Bugçƒ­åº¦æ¦œ</title>
    <style>
        :root {
            --primary-color: #0066ff;
            --secondary-color: #e6f0ff;
        }

        body {
            font-family: "Microsoft YaHei", sans-serif;
            margin: 0;
            padding: 16px;








            background-color: #f5f8ff;
            min-height: 100vh;
        }

        .container {
            max-width: 720px;
            margin: 0 auto;
            padding: 0;
            box-sizing: border-box;
        }
        /* æ–°å¢å¤´éƒ¨å›¾ç‰‡æ ·å¼ */
        .header-banner {
            background: linear-gradient(135deg, #006EFF, #00C4FF);
            border-radius: 16px;








            padding: 2.5rem;
            margin: 0 auto 20px;
            width: 720px;
            box-shadow: 0 8px 32px rgba(0,110,255,0.15);
            text-align: center;
            color: white;
            transition: transform 0.3s ease;
            box-sizing: border-box;
        }

        .header-banner:hover {
            transform: translateY(-2px);



        }






        .banner-title {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .banner-subtitle {
            font-size: 1.2rem;
            display: flex;
            justify-content: center;
            gap: 2rem;
            opacity: 0.9;



        }






        /* æ–°å¢å¤‡æ³¨æ ·å¼ */
        .update-notice {
            text-align: center;
            color: #666;
            margin: 0 auto 20px;
            font-size: 0.95em;
            padding: 12px;
            background: #ffffff;
            border-radius: 12px;
            width: 720px;








            box-shadow: 0 2px 12px rgba(0,0,0,0.05);
            box-sizing: border-box;
        }

        .category {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(0,102,255,0.08);
            margin: 0 auto 20px;
            overflow: hidden;



            transition: transform 0.2s ease, box-shadow 0.2s ease;





            width: 100%;
            max-width: 720px;
        }

        .category:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,102,255,0.12);
        }

        .category-header {
            padding: 15px 20px;
            background-color: var(--secondary-color);
            cursor: pointer;



            display: flex;





            justify-content: space-between;
            align-items: center;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .delete-category {
            background-color: transparent;
            color: #ff4757;
            font-size: 18px;
            padding: 0 5px;
        }

        .category-title {
            cursor: text;



            padding: 2px 5px;





            border-radius: 4px;
        }

        .category-title:hover {
            background-color: rgba(255, 255, 255, 0.3);
        }

        .category-title.editing {
            background-color: #fff;
            border: 1px solid #ddd;
            outline: none;
        }

        .category-title {
            font-size: 18px;



            color: var(--primary-color);





            font-weight: 500;
        }

        .item-list {
            display: none;
            padding: 10px 20px;
        }

        .item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #eee;
        }

        .item:last-child {
            border-bottom: none;
        }

        .item-name {



            color: #333;
        }

        .item-content {





            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }

        .item-name {
            cursor: pointer;
            padding: 2px 5px;
            border-radius: 4px;
        }

        .item-name:hover {
            background-color: #f5f5f5;
        }

        .item-name.editing {



            background-color: #fff;

            border: 1px solid #ddd;




            outline: none;
        }

        .count-input {
            border: 1px solid #ddd;
            border-radius: 4px;
            color: var(--primary-color);
            font-weight: bold;
            text-align: center;
        }

        .item-count {
            color: var(--primary-color);
            font-weight: bold;
            margin-right: 10px;
        }

        .item-actions {



            display: flex;
            align-items: center;





            gap: 5px;
        }

        .action-btn {
            width: 24px;
            height: 24px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            transition: background-color 0.2s;
        }




        .action-btn.delete {
            background-color: #ffe6e6;





            color: #ff4757;
        }

        .action-btn:hover {
            opacity: 0.8;
        }

        .arrow {
            border: solid var(--primary-color);
            border-width: 0 2px 2px 0;
            display: inline-block;
            padding: 4px;
            transform: rotate(45deg);
            transition: transform 0.3s;



        }

        .expanded .arrow {





            transform: rotate(-135deg);
        }

        .subtitle {
            font-size: 16px;
            color: #333;
            font-weight: 500;
            padding: 15px 0 10px;
            margin-top: 5px;
            border-bottom: 1px solid #eee;
        }

        .subtitle:first-child {
            margin-top: 0;
        }



    </style>
</head>
<body>






  <div class="container">
    <!-- æ–°å¢å¤´éƒ¨å›¾ç‰‡ -->
    <div class="header-banner">
        <div class="banner-title">è…¾è®¯ä¼šè®®Bugçƒ­åº¦æ¦œ</div>
        <div class="banner-subtitle">
            <span>âœ¨ æ–°é²œ</span>
            <span>ğŸ”¥ çƒ­é—¨</span>
            <span>ğŸ’¡ æœ‰æ–™</span>
        </div>
    </div>





    <!-- æœç´¢åŠŸèƒ½ -->
    <div id="searchBox" style="max-width: 720px; margin: 0 auto 20px; background: white; padding: 15px; border-radius: 12px; box-shadow: 0 4px 16px rgba(0,102,255,0.08);">
        <input type="text" id="searchInput" placeholder="è¾“å…¥å…³é”®å­—æœç´¢..." 
               style="width: calc(100% - 20px); padding: 10px; border: 1px solid #ddd; border-radius: 6px;
                      margin-bottom: 10px; box-sizing: border-box;">
        <div id="searchResults" style="max-height: 300px; overflow-y: auto;"></div>
    </div>

    <!-- æ–°å¢å¤‡æ³¨ -->
    <div class="update-notice" style="display: flex; justify-content: space-between; align-items: center; padding: 12px;">
        <span style="margin-right: auto;">ğŸ“¢ æ¯å‘¨çƒ­ç‚¹Bugï¼Œæ¯å‘¨å››æ›´æ–°</span>
        <div style="display: flex; gap: 10px;">
            <button id="weeklyBtn" onclick="showWeeklyHeat()" 



                    style="padding: 8px 16px; 

                           background: #00C4FF; 
                           color: white; 
                           border: none; 
                           border-radius: 6px; 
                           cursor: pointer;
                           transition: all 0.3s ease;
                           font-family: 'Microsoft YaHei', sans-serif;">
                ğŸ•’ å½“å‘¨çƒ­åº¦æ¦œ
            </button>
            <button id="historyBtn" onclick="showHistoryHeat()" 



                    style="padding: 8px 16px; 

                           background: var(--primary-color); 
                           color: white; 
                           border: none; 
                           border-radius: 6px; 
                           cursor: pointer;
                           transition: all 0.3s ease;
                           font-family: 'Microsoft YaHei', sans-serif;">
                ğŸ“Š å†å²çƒ­åº¦æ¦œ
            </button>

            <button onclick="clearCache()" 



                    style="padding: 8px 16px; 

                           background: #00C4ff; 


                           color: white; 
                           border: none; 
                           border-radius: 6px; 
                           cursor: pointer; 
                           transition: all 0.3s ease;">
                ğŸ—‘ï¸ æ¸…é™¤ç¼“å­˜
            </button>
        </div>

    </div>


    <script>


        // åˆ·æ–°é¡µé¢å‡½æ•°
        function clearCache() {



            if (confirm('ç¡®å®šè¦åˆ·æ–°é¡µé¢å—ï¼Ÿ')) {
                window.location.reload();
            }
        }



    </script>

    <div id="heatList"></div>
    
    <!-- å½“å‘¨çƒ­åº¦æ¦œæç¤º -->
    <div id="weeklyEmptyTip" style="display: none; max-width: 720px; margin: 20px auto; 
         background: white; padding: 30px 40px 20px; border-radius: 12px; text-align: center;
         box-shadow: 0 4px 16px rgba(0,102,255,0.08); color: #666;">
        <div style="font-size: 24px; margin-bottom: 15px;">ğŸ“­</div>
        <h3 style="color: var(--primary-color); margin: 5px 0 15px;">å½“å‘¨çƒ­åº¦æ¦œ</h3>
        <p>æ¯å‘¨å››ä¸Šåˆ10ç‚¹æ›´æ–°æœ€æ–°æ•°æ®</p>


    </div>
    

    <!-- æ·»åŠ æ›´æ–°è¡¨å• -->


    <div id="addProblemSection" style="max-width: 600px; margin: 30px auto; background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 16px rgba(0,102,255,0.08);">


        <div style="margin-bottom: 20px;">




            <h3 style="color: var(--primary-color); margin-bottom: 15px;">æ·»åŠ æ–°é—®é¢˜</h3>
            <div style="display: flex; flex-direction: column; gap: 10px;">


            <div style="display: flex; gap: 10px; margin-bottom: 10px;">




                <select id="categorySelect" style="flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 6px;">


                    <option value="">é€‰æ‹©å·²æœ‰ç±»åˆ«...</option>
                    <option value="new">+ åˆ›å»ºæ–°ç±»åˆ«</option>
                </select>
            </div>


            <div id="newCategoryInputs" style="display: none; margin-bottom: 10px;">
                <input type="text" id="newCategoryInput" placeholder="è¾“å…¥æ–°ç±»åˆ«åç§°" 






                       style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 6px; margin-bottom: 10px;">
            </div>


            <input type="text" id="descriptionInput" placeholder="é—®é¢˜æè¿°" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 6px; margin-bottom: 10px;">






            <input type="number" id="countInput" placeholder="å‡ºç°æ¬¡æ•°" min="1" value="1" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 6px; margin-bottom: 10px;">





            <button onclick="addNewIssue()" style="width: 100%; padding: 10px; background: var(--primary-color); color: white; border: none; border-radius: 6px; cursor: pointer;">
                æ·»åŠ æ›´æ–°
            </button>


            </div>

        </div>
    </div>

    <!-- æ·»åŠ å›¾è¡¨å®¹å™¨ -->



    <div id="pieChartContainer" style="max-width: 600px; margin: 30px auto; background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 16px rgba(0,102,255,0.08);">



        <canvas id="pieChart"></canvas>

    </div>
</div>

    <!-- å¼•å…¥Chart.jsåº“ -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // ä»localStorageè·å–æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä½¿ç”¨é»˜è®¤æ•°æ®


        let data = JSON.parse(localStorage.getItem('crData')) || [
            {
                title: "ä¸€ã€ä»£ç é£æ ¼ä¸å¯è¯»æ€§",
                children: [
                    {



                        subtitle: "å‡½æ•°è®¾è®¡",
                        items: [



                            { name: "é¿å…é•¿å‡½æ•°ï¼Œåˆ†è§£ä¸ºå•ä¸€èŒè´£çš„å­å‡½æ•°", count: 4 },
                            { name: "å‡½æ•°å‘½åéœ€æ¸…æ™°è¾¾æ„", count: 3 },
                            { name: "æå‰è¿”å›æ¡ä»¶åˆ¤æ–­ï¼Œå‡å°‘åµŒå¥—å±‚çº§", count: 3 },


                            { name: "æœªä½¿ç”¨çš„å‡½æ•°æˆ–å‚æ•°éœ€åˆ é™¤", count: 3 },



                            { name: "é¿å…é­”æ•°ï¼Œä½¿ç”¨å¸¸é‡æˆ–æ³¨é‡Šè¯´æ˜", count: 3 },



                            { name: "æ„é€ å‡½æ•°æ— é€»è¾‘æ—¶ç”¨ default å£°æ˜", count: 2 },
                            { name: "é¿å…åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨è¿‡å¤š if/else åµŒå¥—", count: 2 },


                            { name: "å‡½æ•°å‚æ•°ä½¿ç”¨ const & ä¼ é€’ä¸å¯å˜æ•°æ®", count: 1 }
                        ]
                    },
                    {
                        subtitle: "å‘½åè§„èŒƒ",
                        items: [





                            { name: "å˜é‡ã€å‡½æ•°ã€ç±»å‘½åéœ€å‡†ç¡®ï¼Œé¿å…æ‹¼å†™é”™è¯¯", count: 3 },

                            { name: "å¾ªç¯è¿­ä»£å™¨é¿å…æ··æ·†å‘½åï¼ˆå¦‚ beginï¼‰", count: 1 },
                            { name: "ç›¸åŒå«ä¹‰çš„å‘½åéœ€ç»Ÿä¸€", count: 1 }
                        ]
                    },
                    {
                        subtitle: "æ³¨é‡Šä¸æ–‡æ¡£",
                        items: [


                            { name: "å¤æ‚é€»è¾‘æˆ–å‚æ•°éœ€è¡¥å……æ³¨é‡Š", count: 3 },



                            { name: "å‡½æ•°å‚æ•°è¿‡å¤šæ—¶æ ‡æ˜å«ä¹‰", count: 1 },



                            { name: "åˆ é™¤æ— ç”¨æ³¨é‡Šä»£ç ", count: 2 }
                        ]
                    }
                ]
            },
            {
                title: "äºŒã€å®‰å…¨æ€§ä¸å¥å£®æ€§",
                children: [
                    {
                        subtitle: "å­—ç¬¦ä¸²å¤„ç†",
                        items: [


                            { name: "ä½¿ç”¨æ ‡å‡†åº“å‡½æ•°å¤„ç†å­—ç¬¦ä¸²ï¼Œé¿å…å®‰å…¨é—®é¢˜", count: 1 }
                        ]
                    },
                    {

                        subtitle: "æŒ‡é’ˆä¸ç”Ÿå‘½å‘¨æœŸ",


                        items: [



                            { name: "å…³æ³¨æŒ‡é’ˆç”Ÿå‘½å‘¨æœŸï¼Œé¿å…é‡æŒ‡é’ˆ", count: 1 }
                        ]
                    },
                    {
                        subtitle: "é»˜è®¤å€¼ä¸é”™è¯¯å¤„ç†",
                        items: [
                            { name: "é¿å…ä½¿ç”¨é»˜è®¤å€¼è·å–æ•°æ®", count: 1 },


                            { name: "æ¥å£è¯·æ±‚éœ€å¤„ç†å¤±è´¥åœºæ™¯ï¼Œåšå¥½å…œåº•é€»è¾‘", count: 1 }
                        ]
                    }
                ]
            },
            {



                title: "ä¸‰ã€ä»£ç ç»“æ„ä¸ç»„ç»‡",
                children: [
                    {



                        subtitle: "å·¥å…·å‡½æ•°ä¸å¤ç”¨",
                        items: [
                            { name: "å°è£…å¸¸ç”¨æ“ä½œä¸ºå·¥å…·å‡½æ•°", count: 3 },
                            { name: "å¤ç”¨å·²æœ‰å°è£…æ–¹æ³•ï¼ˆå¦‚ Base åº“æˆ–å…¬å…±æ–¹æ³•ï¼‰", count: 1 }
                        ]
                    },


                    {

                        subtitle: "æ¨¡å—åŒ–ä¸å°è£…",

                        items: [



                            { name: "ä½¿ç”¨ç»“æ„ä½“ç»Ÿä¸€æ¥å£å‚æ•°", count: 2 },



                            { name: "é¿å…é‡å¤ä»£ç ï¼ŒæŠ½å–å…¬å…±é€»è¾‘", count: 2 }
                        ]
                    },
                    {
                        subtitle: "æ ‡å‡†åº“ä½¿ç”¨",
                        items: [
                            { name: "ä¼˜å…ˆä½¿ç”¨ std::findã€std::priority_queue ç­‰æ ‡å‡†åº“", count: 1 },


                            { name: "ä½¿ç”¨ contains æ›¿ä»£ find != end åˆ¤æ–­ map åŒ…å«å…³ç³»", count: 1 }
                        ]
                    }
                ]
            },

            {


                title: "å››ã€æ§åˆ¶ç»“æ„ä¸é€»è¾‘ä¼˜åŒ–",

                children: [

                    {

                        subtitle: "æ¡ä»¶åˆ¤æ–­",
                        items: [
                            { name: "æå‰å¤„ç†é”™è¯¯æ¡ä»¶ï¼Œå‡å°‘åµŒå¥—", count: 2 },
                            { name: "é¿å…å¤šå±‚ if åµŒå¥—ï¼Œå°½é‡å‰ç½® return", count: 2 }
                        ]
                    },


                    {

                        subtitle: "å¾ªç¯ä¸æ€§èƒ½",

                        items: [





                            { name: "é¿å…ä¸»çº¿ç¨‹å¤„ç†è€—æ—¶é€»è¾‘ï¼ˆå¦‚ O(n) éå†å¤§åˆ—è¡¨ï¼‰", count: 1 },

                            { name: "æ•°æ®é¢„å¤„ç†æ”¾åœ¨å­çº¿ç¨‹", count: 1 }
                        ]
                    }
                ]
            },
            {
                title: "äº”ã€èµ„æºç®¡ç†ä¸ç”Ÿå‘½å‘¨æœŸ",
                children: [
                    {
                        subtitle: "ç¼“å­˜ä¸æ•°æ®æ¸…ç†",
                        items: [




                            { name: "å•ä¾‹æœåŠ¡éœ€è€ƒè™‘åˆ‡æ¢è´¦å·æ—¶çš„ç¼“å­˜æ¸…ç†", count: 1 },




                            { name: "æ•´ä½“ Review åˆ‡æ¢è´¦å·åœºæ™¯çš„ Model å±‚æ•°æ®", count: 1 }
                        ]
                    },
                    {
                        subtitle: "å†…å­˜ä¸èµ„æº",
                        items: [
                            { name: "é¿å…éšæ„å¤åˆ¶ä»£ç å¯¼è‡´å†…å­˜è¦†ç›–ï¼ˆå¦‚é€šè®¯å½•ä¸šåŠ¡ï¼‰", count: 1 },

                            { name: "åˆ é™¤æ— ç”¨ä»£ç æ—¶æ£€æŸ¥å…³è”èµ„æº", count: 1 }
                        ]
                    }

                ]
            },
            {



                title: "å…­ã€æ€§èƒ½ä¸æ•ˆç‡",
                children: [
                    {


                        subtitle: "çº¿ç¨‹ä¸å¼‚æ­¥",

                        items: [
                            { name: "è€—æ—¶é€»è¾‘ï¼ˆå¦‚æ•°æ®æŸ¥è¯¢ï¼‰æ”¾åœ¨å­çº¿ç¨‹å¤„ç†", count: 1 },
                            { name: "å­çº¿ç¨‹ä»»åŠ¡éœ€ç›‘æ§ç­–ç•¥ï¼ˆå¦‚ç°åº¦å¼€å…³ã€å¡é¡¿ä¸ŠæŠ¥ï¼‰", count: 1 }
                        ]
                    },

                    {

                        subtitle: "é¢„åŠ è½½ä¸æµé‡",
                        items: [





                            { name: "æ•°æ®é¢„åŠ è½½éœ€è°¨æ…ï¼Œé¿å…é«˜é¢‘æˆ–å¤§èŒƒå›´åŠ è½½å¯¼è‡´æµé‡é—®é¢˜", count: 1 }

                        ]
                    }
                ]
            },
            {
                title: "ä¸ƒã€æ—¥å¿—ä¸ç›‘æ§",
                children: [
                    {
                        subtitle: "æ—¥å¿—è§„èŒƒ",
                        items: [
                            { name: "æ·»åŠ å…³é”®æ—¥å¿—ï¼Œä¾¿äºé—®é¢˜å®šä½", count: 2 },



                            { name: "é¿å…è¶…é¢‘æ—¥å¿—ï¼Œç²¾ç®€å¿…è¦å†…å®¹", count: 1 },



                            { name: "æ—¥å¿—æ·»åŠ éœ€æ±‚/ä¸šåŠ¡æ ‡ç­¾", count: 1 }
                        ]

                    },

                    {
                        subtitle: "ç›‘æ§ç­–ç•¥",
                        items: [
                            { name: "å»ºç«‹å­çº¿ç¨‹ç›‘æ§çœ‹æ¿ï¼ˆå¦‚è¯†æ•°å¹³å°ä¸ŠæŠ¥æ•°æ®ï¼‰", count: 1 }
                        ]
                    }
                ]
            },
            {
                title: "å…«ã€ä»£ç ç»´æŠ¤ä¸é‡æ„",

                children: [
                    {

                        subtitle: "å†—ä½™ä»£ç å¤„ç†",

                        items: [



                            { name: "åˆ é™¤æœªä½¿ç”¨çš„å˜é‡ã€å‡½æ•°ã€å®", count: 3 },


                            { name: "æ¸…ç†æ³¨é‡Šä»£ç å’ŒåºŸå¼ƒé€»è¾‘", count: 1 }
                        ]
                    },
                    {
                        subtitle: "å®ç®¡ç†",
                        items: [
                            { name: "å‡å°‘å®æ•°é‡ï¼Œç”¨å¯¹åº”å®åŒ…è£¹å¹³å°ç‹¬æœ‰ä»£ç ", count: 2 },


                            { name: "å…¬å…±æ–‡ä»¶æ— éœ€å®åŒ…è£¹", count: 1 }
                        ]
                    }

                ]
            },


            {
                title: "ä¹ã€åè®®ä¸æ¥å£è®¾è®¡",

                children: [
                    {


                        subtitle: "æ¥å£è®¾è®¡",
                        items: [
                            { name: "æ–¹æ³•å…¥å‚ä½¿ç”¨ const & ä¼ é€’ä¸å¯å˜æ•°æ®", count: 1 },
                            { name: "Model Call è¿”å›å€¼ä¸ç”¨äºè¿”å›æ•°æ®", count: 1 },


                            { name: "æ¨åŠ¨åå°åè®®æ”¶å½’ï¼ˆå¦‚å¤šæ¡åè®®è§£æå¤ç”¨ï¼‰", count: 1 }
                        ]

                    },
                    {


                        subtitle: "æ‰©å±•ä¸ç»„åˆ",
                        items: [



                            { name: "ä¸åŒæ‰©å±•å°½é‡åœ¨ç»Ÿä¸€å®¹å™¨ç»„åˆï¼Œé¿å…æ–°å¢å®¹å™¨", count: 1 }
                        ]
                    }
                ]
            },
            {
                title: "åã€è·¨å¹³å°ä¸å…¼å®¹æ€§",
                children: [
                    {
                        subtitle: "å¹³å°é€‚é…",
                        items: [



                            { name: "è·¨å¹³å°é€»è¾‘éœ€å……åˆ†éªŒè¯å¯¹ç°æœ‰åœºæ™¯çš„å½±å“", count: 1 },




                            { name: "åˆ†å¹³å°æŠ½ç¦»æ–‡ä»¶æ–¹æ³•ï¼ˆå¦‚ NXUI çš„ VM ä½¿ç”¨ CreatStateï¼‰", count: 1 }

                        ]
                    },
                    {
                        subtitle: "UI ä¸é…ç½®",
                        items: [
                            { name: "æ¨ªç«–å±åˆ‡æ¢æ—¶å¤ç”¨å†…å®¹", count: 1 },

                            { name: "é…ç½®å†…å®¹åŒºåˆ†ç¡¬ç¼–ç ä¸åŠ¨æ€é…ç½®ï¼ˆå¦‚æ°´ç‰Œæ ·å¼ï¼‰", count: 1 }
                        ]
                    }
                ]

            },
            {



                title: "åä¸€ã€æ•°æ®ç¼“å­˜ä¸å¤„ç†",
                children: [
                    {

                        subtitle: "æ•°æ®ä¸€è‡´æ€§",


                        items: [
                            { name: "é¿å…å¤šåˆ—è¡¨ç¼“å­˜è¦†ç›–ï¼ˆå¦‚é€šè®¯å½•ä¸šåŠ¡ï¼‰", count: 1 },
                            { name: "æ•°æ®ä¸‹æ²‰å¤„ç†ï¼ˆå¦‚ Profile é€»è¾‘ä¸‹æ²‰åˆ° VMï¼‰", count: 1 }
                        ]
                    },
                    {
                        subtitle: "åè®®å…¼å®¹",

                        items: [




                            { name: "PB/XMPP åè®®ä¿®æ”¹éœ€ä¸æ¨¡å— Owner ç¡®è®¤", count: 1 }

                        ]
                    }
                ]

            },
            {

                title: "åäºŒã€UI ä¸èµ„æºç®¡ç†",
                children: [
                    {
                        subtitle: "ç»„ä»¶è®¾è®¡",
                        items: [
                            { name: "é¿å…å¤šä½™ UI å±‚çº§ï¼ˆå¦‚ NX å®ç°åˆ é™¤å¤–å±‚å®¹å™¨ï¼‰", count: 1 },



                            { name: "éäº¤äº’å…ƒç´ ä¸ä½¿ç”¨ NXButton", count: 1 }

                        ]

                    },
                    {
                        subtitle: "èµ„æºä¼˜åŒ–",

                        items: [


                            { name: "ç›¸åŒå†…å®¹æ¨ªç«–å±å¤ç”¨", count: 1 },
                            { name: "ç¡®è®¤èµ„æºåˆ é™¤å…³è”æ€§", count: 1 }
                        ]
                    }
                ]
            },
            {
                title: "ç‰¹æ®Šæ¡ç›®ï¼ˆéœ€å•ç‹¬è¯´æ˜ï¼‰",
                children: [
                    {
                        subtitle: "å·¥å…·ç±»ä¼˜åŒ–",

                        items: [




                            { name: "ä½¿ç”¨ Variant helper å¤„ç† AsXxxxx è°ƒç”¨", count: 1 },



                            { name: "èƒ½åŠ›é…ç½®é•¿åº¦é™åˆ¶ï¼ˆå¦‚ URL ä¸è¶…è¿‡ 200 å­—èŠ‚ï¼‰", count: 1 }
                        ]
                    },
                    {
                        subtitle: "ä¸šåŠ¡åœºæ™¯é€‚é…",
                        items: [

                            { name: "æ°´ç‰Œéœ€æ±‚éœ€å…¼å®¹æ–°æ—§ä¼šä¸­æ¨¡å¼ã€æ·±è‰²/æµ…è‰²æ¨¡å¼", count: 1 },




                            { name: "Cowork ç´ æç³»ç»Ÿéœ€æ”¯æŒç‰ˆæœ¬é…ç½®å’Œæ‰¹é‡ä¸Šä¼ ", count: 1 }
                        ]

                    },
                    {


                        subtitle: "åè®®ä¸æ•°æ®æµ",
                        items: [
                            { name: "OnEventAuthorizeStateUpdate éœ€å¤„ç†æ–­ç½‘é‡è¿åœºæ™¯", count: 1 },
                            { name: "ä¿¡é¸½æ¨é€ç‚¹å‡»é€»è¾‘éœ€å¯¹é½å¤šç«¯", count: 1 }
                        ]
                    }
                ]
            }
        ];



        // ç”ŸæˆDOMç»“æ„


        function renderList() {

            const container = document.getElementById('heatList');
            

            data.forEach(category => {


                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'category';
                
                // æ¸²æŸ“ä¸€çº§æ ‡é¢˜
                const header = document.createElement('div');
                header.className = 'category-header';
                header.innerHTML = `

                    <span class="category-title" onclick="makeCategoryEditable(this, '${category.title}')">${category.title}</span>



                    <div class="header-actions">


                        <button class="action-btn delete-category" title="åˆ é™¤åˆ†ç±»">Ã—</button>

                        <i class="arrow"></i>

                    </div>
                `;

                // æ·»åŠ åˆ é™¤åˆ†ç±»çš„äº‹ä»¶ç›‘å¬
                const deleteCategoryBtn = header.querySelector('.delete-category');
                deleteCategoryBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªåˆ†ç±»åŠå…¶æ‰€æœ‰å†…å®¹å—ï¼Ÿ')) {

                        deleteCategory(category);

                    }

                });
                


                const itemList = document.createElement('div');
                itemList.className = 'item-list';
                


                // æ¸²æŸ“äºŒçº§æ ‡é¢˜å’Œå†…å®¹

                category.children.forEach(section => {
                    // æ·»åŠ äºŒçº§æ ‡é¢˜
                    const subtitleDiv = document.createElement('div');
                    subtitleDiv.className = 'subtitle';
                    subtitleDiv.textContent = section.subtitle;
                    itemList.appendChild(subtitleDiv);
                    
                    // æ·»åŠ å…·ä½“å†…å®¹é¡¹
                    section.items.forEach((item, itemIndex) => {




                        const itemDiv = document.createElement('div');

                        itemDiv.className = 'item';
                        itemDiv.innerHTML = `

                            <div class="item-content">


                                <span class="item-name" onclick="makeEditable(this, '${item.name}')">${item.name}</span>
                                <div class="item-actions">
                                    <input type="number" class="count-input" value="${item.count}" min="1" 


                                           onchange="updateItemCount(this, ${itemIndex}, '${section.subtitle}')"




                                           style="width: 50px; margin-right: 5px; padding: 2px 5px;">


                                    <span class="item-count">æ¬¡</span>
                                    <button class="action-btn delete" title="åˆ é™¤">Ã—</button>
                                </div>
                            </div>
                        `;

                        // æ·»åŠ åˆ é™¤æŒ‰é’®äº‹ä»¶
                        const deleteBtn = itemDiv.querySelector('.delete');
                        deleteBtn.addEventListener('click', (e) => {
                            e.stopPropagation();





                            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™æ¡è®°å½•å—ï¼Ÿ')) {
                                deleteItem(category, section, itemIndex);
                            }
                        });


                        itemList.appendChild(itemDiv);
                    });

                });


                header.addEventListener('click', () => {
                    itemList.style.display = itemList.style.display === 'block' ? 'none' : 'block';
                    header.parentElement.classList.toggle('expanded');
                });

                categoryDiv.appendChild(header);
                categoryDiv.appendChild(itemList);
                container.appendChild(categoryDiv);
            });
        }



        // æ·»åŠ é—®é¢˜æ›´æ–°æ¥å£



        function updateIssues(newIssues) {



            // newIssuesæ ¼å¼ï¼š[{category: "å‘½åè§„èŒƒ", description: "å‘½åæœ‰æ‹¼å†™é”™è¯¯", count: 1}]
            
            // éå†æ–°å¢é—®é¢˜
            newIssues.forEach(issue => {
                // åœ¨ç°æœ‰æ•°æ®ä¸­æŸ¥æ‰¾å¯¹åº”ç±»åˆ«
                for (let category of data) {
                    for (let child of category.children) {
                        if (child.subtitle === issue.category) {


                            // æŸ¥æ‰¾æ˜¯å¦å·²å­˜åœ¨ç›¸åŒæè¿°çš„é—®é¢˜



                            let existingItem = child.items.find(item => 
                                item.name.toLowerCase() === issue.description.toLowerCase()

                            );
                            

                            if (existingItem) {

                                // å¦‚æœå­˜åœ¨ï¼Œæ›´æ–°è®¡æ•°
                                existingItem.count += issue.count;
                            } else {
                                // å¦‚æœä¸å­˜åœ¨ï¼Œæ·»åŠ æ–°é—®é¢˜
                                child.items.push({
                                    name: issue.description,
                                    count: issue.count
                                });
                            }
                            break;
                        }
                    }
                }
            });




            // é‡æ–°è®¡ç®—é¥¼å›¾æ•°æ®


            const pieData = calculatePieData();
            
            // æ›´æ–°DOM

            document.getElementById('heatList').innerHTML = '';

            renderList();
            

            // æ›´æ–°é¥¼å›¾
            updatePieChart(pieData);
        }

        // è®¡ç®—é¥¼å›¾æ•°æ®
        function calculatePieData() {
            // æ”¶é›†æ•°æ®
            const categoryData = data.map(category => {
                let total = 0;

                category.children.forEach(child => {

                    child.items.forEach(item => {



                        total += item.count;
                    });
                });

                // ä½¿ç”¨ä¸å¸¦åºå·çš„åˆ†ç±»å

                const categoryName = category.title.split('ã€')[1];

                return { name: categoryName, value: total };
            });
            
            // æŒ‰ç…§æ•°å€¼ä»å¤§åˆ°å°æ’åº
            categoryData.sort((a, b) => b.value - a.value);
            
            return {
                labels: categoryData.map(item => item.name),



                data: categoryData.map(item => item.value)

            };

        }

        // æ›´æ–°é¥¼å›¾

        function updatePieChart(pieData) {


            const ctx = document.getElementById('pieChart').getContext('2d');
            if (window.myPieChart) {
                window.myPieChart.destroy();
            }
            
            window.myPieChart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: pieData.labels,
                    datasets: [{

                        data: pieData.data,

                        backgroundColor: [




                            '#FF6384', '#FFCE56', '#E74C3C', '#4BC0C0', 


                            '#2ECC71', '#36A2EB', '#9966FF', '#3498DB', 
                            '#F1C40F', '#E67E22', '#FF9F40', '#8E44AD'
                        ],

                        borderWidth: 1

                    }]
                },



                options: {
                    responsive: true,
                    plugins: {
                        legend: {

                            position: 'right',
                            labels: {

                                font: {

                                    family: '"Microsoft YaHei", sans-serif'
                                }
                            }
                        },
                        title: {
                            display: true,
                            text: 'Code Review é—®é¢˜åˆ†å¸ƒ',
                            font: {
                                size: 16,
                                family: '"Microsoft YaHei", sans-serif'

                            }
                        },

                        tooltip: {

                            callbacks: {


                                label: function(context) {
                                    const label = context.label || '';

                                    const value = context.parsed || 0;


                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = ((value / total) * 100).toFixed(1);
                                    return `${label}: ${value}æ¬¡ (${percentage}%)`;
                                }
                            }
                        }
                    }

                }
            });
        }


        // åˆå§‹åŒ–



        const initialPieData = calculatePieData();
        renderList();
        updatePieChart(initialPieData);



        // åˆå§‹åŒ–ç±»åˆ«é€‰æ‹©å™¨


        function initCategorySelect() {
            const select = document.getElementById('categorySelect');
            // è·å–æ‰€æœ‰äºŒçº§åˆ†ç±»
            data.forEach(category => {
                category.children.forEach(child => {
                    const option = document.createElement('option');
                    option.value = child.subtitle;
                    option.textContent = child.subtitle;

                    select.appendChild(option);
                });
            });





            // ç›‘å¬ç±»åˆ«é€‰æ‹©å˜åŒ–
            select.addEventListener('change', function() {

                const newCategoryInputs = document.getElementById('newCategoryInputs');


                newCategoryInputs.style.display = this.value === 'new' ? 'block' : 'none';
            });
        }

        // æ¸²æŸ“å½“å‘¨çƒ­åº¦æ¦œ
        function renderWeeklyList() {
            const container = document.getElementById('weeklyEmptyTip');
            container.innerHTML = `
        <h3 style="color: var(--primary-color); margin-bottom: 10px;">å½“å‘¨çƒ­åº¦æ¦œ</h3>
        <div style="color: #666; margin-bottom: 15px; font-size: 0.9em;" id="weeklyDateRange"></div>
                <div id="weeklyList" style="text-align: left; margin: 20px 0;"></div>
            `;


            const listContainer = document.getElementById('weeklyList');
            listContainer.innerHTML = '';
            

            // æŒ‰æ¬¡æ•°æ’åº
            weeklyData.sort((a, b) => b.count - a.count);
            
            weeklyData.forEach((item, index) => {
                const itemDiv = document.createElement('div');


                itemDiv.className = 'weekly-item';


                itemDiv.style = 'padding: 10px; border-bottom: 1px solid #eee;';
                itemDiv.innerHTML = `


                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="flex: 1;">
                            <span style="color: #666; margin-right: 10px;">${index + 1}.</span>


                            <span class="editable-text">${item.description}</span>

                        </div>

                        <div style="display: flex; align-items: center; gap: 10px;">
                            <input type="number" 
                                   value="${item.count}" 
                                   min="1" 
                                   style="width: 60px; padding: 5px;"
                                   onchange="updateWeeklyCount(${index}, this.value)">
                            <span style="margin-left: 5px;">æ¬¡</span>
                            <button onclick="deleteWeeklyItem(${index})" 




                                    style="padding: 5px 10px; background: #ff4757; color: white; border: none; border-radius: 4px; cursor: pointer;">
                                åˆ é™¤
                            </button>

                        </div>
                    </div>
                `;
                

                // æ·»åŠ ç¼–è¾‘åŠŸèƒ½
                const textSpan = itemDiv.querySelector('.editable-text');
                textSpan.addEventListener('click', () => {
                    makeWeeklyEditable(textSpan, index);
                });
                
                listContainer.appendChild(itemDiv);

            });
        }



        // æ›´æ–°å½“å‘¨é—®é¢˜æ¬¡æ•°

        function updateWeeklyCount(index, value) {
            weeklyData[index].count = parseInt(value) || 1;

            localStorage.setItem('weeklyData', JSON.stringify(weeklyData));
            renderWeeklyList();
        }


        // åˆ é™¤å½“å‘¨é—®é¢˜
        function deleteWeeklyItem(index) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªé—®é¢˜å—ï¼Ÿ')) {
                weeklyData.splice(index, 1);


                localStorage.setItem('weeklyData', JSON.stringify(weeklyData));

                renderWeeklyList();
            }
        }


        // æ›´æ–°å½“å‘¨æ—¶é—´æ˜¾ç¤º
        function updateWeeklyDate() {
            const now = new Date();

            const dayOfWeek = now.getDay(); // 0 = Sunday, 1 = Monday...

            const monday = new Date(now);
            monday.setDate(now.getDate() - (dayOfWeek === 0 ? 6 : dayOfWeek - 1));
            const sunday = new Date(monday);
            sunday.setDate(monday.getDate() + 6);


            const formatDate = (date) => {


                return `${date.getFullYear()}.${(date.getMonth()+1).toString().padStart(2, '0')}.${date.getDate().toString().padStart(2, '0')}`;
            };


            document.getElementById('weeklyDateRange').textContent = 
                `${formatDate(monday)} - ${formatDate(sunday)}`;
        }

        // å½“å‘¨é—®é¢˜ç¼–è¾‘åŠŸèƒ½
        function makeWeeklyEditable(element, index) {
            const originalText = element.textContent;

            element.contentEditable = true;
            element.focus();

            
            element.addEventListener('blur', function() {
                element.contentEditable = false;
                const newText = element.textContent.trim();

                if (newText && newText !== originalText) {

                    weeklyData[index].description = newText;


                    localStorage.setItem('weeklyData', JSON.stringify(weeklyData));
                }
            });
            
            element.addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    element.blur();

                }
            });
        }


        // æ·»åŠ æ–°é—®é¢˜
        function addNewIssue() {
            const categorySelect = document.getElementById('categorySelect');


            const isWeeklyMode = document.getElementById('weeklyEmptyTip').style.display === 'block';

            const newCategoryInput = document.getElementById('newCategoryInput');


            const description = document.getElementById('descriptionInput').value;

            const count = parseInt(document.getElementById('countInput').value) || 1;

            let category = categorySelect.value;


            // å¤„ç†æ–°ç±»åˆ«çš„æƒ…å†µ

            if (category === 'new') {
                category = newCategoryInput.value.trim();
                if (!category) {

                    alert('è¯·è¾“å…¥æ–°ç±»åˆ«åç§°ï¼');
                    return;
                }
            }


            if (!category || !description) {


                alert('è¯·å¡«å†™å®Œæ•´çš„é—®é¢˜ä¿¡æ¯ï¼');
                return;
            }



            // å¦‚æœæ˜¯æ–°ç±»åˆ«ï¼Œéœ€è¦åˆ›å»ºæ–°çš„ç±»åˆ«ç»“æ„
            if (categorySelect.value === 'new') {

                // æŸ¥æ‰¾æœ€åä¸€ä¸ªç±»åˆ«çš„åºå·

                const lastCategory = data[data.length - 1];
                const newIndex = parseInt(lastCategory.title.split('ã€')[0]) + 1;
                

                // åˆ›å»ºæ–°çš„ç±»åˆ«
                const newCategory = {

                    title: `${newIndex}ã€${category}`,

                    children: [{

                        subtitle: category,
                        items: []

                    }]
                };
                

                // æ·»åŠ åˆ°æ•°æ®ä¸­
                data.push(newCategory);
                
                // æ›´æ–°é€‰æ‹©å™¨

                const option = document.createElement('option');

                option.value = category;
                option.textContent = category;
                categorySelect.insertBefore(option, categorySelect.lastElementChild);
            }


            // æ ¹æ®å½“å‰æ¨¡å¼ä¿å­˜åˆ°ä¸åŒæ•°æ®é›†

            if (isWeeklyMode) {
                weeklyData.push({

                    description: description,

                    count: count,
                    category: category
                });
                localStorage.setItem('weeklyData', JSON.stringify(weeklyData));
                renderWeeklyList();
            } else {
                updateIssues([{

                    category: category,
                    description: description,

                    count: count
                }]);
            }
            
            // ä¿å­˜åˆ°localStorage

            localStorage.setItem('crData', JSON.stringify(data));



            // æ¸…ç©ºè¾“å…¥

            document.getElementById('descriptionInput').value = '';


            document.getElementById('countInput').value = '1';

            // æ˜¾ç¤ºæˆåŠŸæç¤º
            alert('æ›´æ–°æˆåŠŸï¼');
        }

        // åˆ é™¤é¡¹ç›®å‡½æ•°
        function deleteItem(category, section, itemIndex) {

            // ä»æ•°ç»„ä¸­åˆ é™¤è¯¥é¡¹

            section.items.splice(itemIndex, 1);
            

            // å¦‚æœè¯¥åˆ†ç±»ä¸‹æ²¡æœ‰é¡¹ç›®äº†ï¼Œå¯ä»¥é€‰æ‹©æ˜¯å¦åˆ é™¤æ•´ä¸ªåˆ†ç±»


            if (section.items.length === 0) {

                const categoryIndex = category.children.indexOf(section);

                if (categoryIndex !== -1) {

                    category.children.splice(categoryIndex, 1);
                }
            }
            
            // æ›´æ–°DOM
            document.getElementById('heatList').innerHTML = '';
            renderList();
            

            // æ›´æ–°é¥¼å›¾

            updatePieChart(calculatePieData());
            
            // ä¿å­˜åˆ°localStorage
            localStorage.setItem('crData', JSON.stringify(data));

        }



        // ä½¿æ–‡æœ¬å¯ç¼–è¾‘

        function makeEditable(element, originalText) {

            if (element.classList.contains('editing')) return;
            

            element.classList.add('editing');
            element.contentEditable = true;
            element.focus();
            
            // ä¿å­˜åŸå§‹æ–‡æœ¬ï¼Œç”¨äºå–æ¶ˆç¼–è¾‘

            element.dataset.originalText = originalText;
            

            // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
            element.addEventListener('blur', function onBlur() {
                finishEditing(element);

                element.removeEventListener('blur', onBlur);
            });

            


            element.addEventListener('keydown', function onKeyDown(e) {
                if (e.key === 'Enter') {

                    e.preventDefault();

                    element.blur();
                } else if (e.key === 'Escape') {
                    element.textContent = element.dataset.originalText;
                    element.blur();
                }
            });
        }


        // å®Œæˆç¼–è¾‘

        function finishEditing(element) {
            element.classList.remove('editing');
            element.contentEditable = false;
            
            const newText = element.textContent.trim();



            const originalText = element.dataset.originalText;
            

            if (newText !== originalText && newText !== '') {

                // æ›´æ–°æ•°æ®

                updateItemText(originalText, newText);
            } else if (newText === '') {
                element.textContent = originalText;
            }
        }

        // æ›´æ–°é¡¹ç›®æ–‡æœ¬

        function updateItemText(originalText, newText) {

            let updated = false;
            data.forEach(category => {
                category.children.forEach(section => {



                    const item = section.items.find(item => item.name === originalText);

                    if (item) {
                        item.name = newText;
                        updated = true;

                    }
                });
            });

            
            if (updated) {
                localStorage.setItem('crData', JSON.stringify(data));
            }
        }

        // æ›´æ–°é¡¹ç›®æ¬¡æ•°

        function updateItemCount(input, itemIndex, sectionTitle) {

            const newCount = parseInt(input.value) || 1;
            if (newCount < 1) {

                input.value = 1;

                return;

            }
            
            data.forEach(category => {

                category.children.forEach(section => {

                    if (section.subtitle === sectionTitle) {

                        if (section.items[itemIndex]) {
                            section.items[itemIndex].count = newCount;
                        }
                    }
                });
            });
            
            // æ›´æ–°é¥¼å›¾

            updatePieChart(calculatePieData());

            // ä¿å­˜åˆ°localStorage
            localStorage.setItem('crData', JSON.stringify(data));
        }



        // ä½¿ä¸€çº§æ ‡é¢˜å¯ç¼–è¾‘

        function makeCategoryEditable(element, originalTitle) {

            if (element.classList.contains('editing')) return;
            


            element.classList.add('editing');
            element.contentEditable = true;
            element.focus();
            
            // ä¿å­˜åŸå§‹æ–‡æœ¬
            element.dataset.originalTitle = originalTitle;
            

            // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨

            element.addEventListener('blur', function onBlur() {
                finishCategoryEditing(element);
                element.removeEventListener('blur', onBlur);
            });
            


            element.addEventListener('keydown', function onKeyDown(e) {


                if (e.key === 'Enter') {
                    e.preventDefault();
                    element.blur();


                } else if (e.key === 'Escape') {
                    element.textContent = element.dataset.originalTitle;
                    element.blur();
                }
            });
        }

        // å®Œæˆä¸€çº§æ ‡é¢˜ç¼–è¾‘

        function finishCategoryEditing(element) {

            element.classList.remove('editing');
            element.contentEditable = false;
            
            const newTitle = element.textContent.trim();


            const originalTitle = element.dataset.originalTitle;
            


            if (newTitle !== originalTitle && newTitle !== '') {
                // æ›´æ–°æ•°æ®


                updateCategoryTitle(originalTitle, newTitle);
            } else if (newTitle === '') {
                element.textContent = originalTitle;
            }
        }

        // æ›´æ–°ä¸€çº§æ ‡é¢˜

        function updateCategoryTitle(originalTitle, newTitle) {

            const category = data.find(cat => cat.title === originalTitle);
            if (category) {


                // ä¿æŒåºå·ä¸å˜ï¼Œåªæ›´æ–°æ ‡é¢˜å†…å®¹


                const index = originalTitle.split('ã€')[0];


                category.title = `${index}ã€${newTitle.split('ã€').pop()}`;
                
                // ä¿å­˜åˆ°localStorage
                localStorage.setItem('crData', JSON.stringify(data));
                
                // æ›´æ–°DOM

                document.getElementById('heatList').innerHTML = '';
                renderList();

                
                // æ›´æ–°é¥¼å›¾
                updatePieChart(calculatePieData());
                

                // æ›´æ–°ç±»åˆ«é€‰æ‹©å™¨


                const select = document.getElementById('categorySelect');



                select.innerHTML = '<option value="">é€‰æ‹©å·²æœ‰ç±»åˆ«...</option><option value="new">+ åˆ›å»ºæ–°ç±»åˆ«</option>';
                initCategorySelect();
            }
        }


        // åˆ é™¤æ•´ä¸ªåˆ†ç±»
        function deleteCategory(category) {
            const index = data.indexOf(category);

            if (index !== -1) {

                data.splice(index, 1);
                
                // æ›´æ–°å‰©ä½™åˆ†ç±»çš„åºå·
                data.forEach((cat, idx) => {


                    const title = cat.title.split('ã€');

                    cat.title = `${idx + 1}ã€${title[1]}`;

                });
                

                // ä¿å­˜åˆ°localStorage
                localStorage.setItem('crData', JSON.stringify(data));
                

                // æ›´æ–°DOM
                document.getElementById('heatList').innerHTML = '';

                renderList();
                
                // æ›´æ–°é¥¼å›¾

                updatePieChart(calculatePieData());
                
                // æ›´æ–°ç±»åˆ«é€‰æ‹©å™¨

                const select = document.getElementById('categorySelect');


                select.innerHTML = '<option value="">é€‰æ‹©å·²æœ‰ç±»åˆ«...</option><option value="new">+ åˆ›å»ºæ–°ç±»åˆ«</option>';

                initCategorySelect();

            }
        }

        // å½“å‘¨çƒ­åº¦æ¦œæ•°æ®ï¼ˆå®Œå…¨ç”±ç”¨æˆ·æ·»åŠ ï¼‰
        let weeklyData = JSON.parse(localStorage.getItem('weeklyData')) || [];


        // çƒ­åº¦æ¦œåˆ‡æ¢å‡½æ•°

        function showWeeklyHeat() {
            document.getElementById('heatList').style.display = 'none';

            document.getElementById('pieChartContainer').style.display = 'none';

            document.getElementById('weeklyEmptyTip').style.display = 'block';

            document.getElementById('addProblemSection').style.display = 'block';
            renderWeeklyList();
            
            // æ›´æ–°æŒ‰é’®æ ·å¼
            document.getElementById('weeklyBtn').style.background = 'var(--primary-color)';


            document.getElementById('historyBtn').style.background = '#00C4FF';
        }

        function showHistoryHeat() {

            document.getElementById('heatList').style.display = 'block';

            document.getElementById('addProblemSection').style.display = 'block';

            document.getElementById('pieChartContainer').style.display = 'block';

            document.getElementById('weeklyEmptyTip').style.display = 'none';
            
            // æ›´æ–°æŒ‰é’®æ ·å¼

            document.getElementById('historyBtn').style.background = 'var(--primary-color)';

            document.getElementById('weeklyBtn').style.background = '#00C4FF';
        }


        // åˆå§‹åŒ–æ—¶è®¾ç½®å½“å‘¨æŒ‰é’®ä¸ºæ¿€æ´»çŠ¶æ€å¹¶æ˜¾ç¤ºå†…å®¹
        document.addEventListener('DOMContentLoaded', function() {

            document.getElementById('weeklyBtn').style.background = 'var(--primary-color)';
            document.getElementById('historyBtn').style.background = '#00C4FF';
            showWeeklyHeat(); // é»˜è®¤æ˜¾ç¤ºå½“å‘¨çƒ­åº¦æ¦œå†…å®¹

        });

        // æœç´¢åŠŸèƒ½å®ç°
        function performSearch(keyword) {
            const results = [];
            const lowerKeyword = keyword.toLowerCase();
            
            // æœç´¢å†å²æ•°æ®
            data.forEach((category, catIndex) => {
                category.children.forEach(section => {
                    section.items.forEach((item, itemIndex) => {
                        if (item.name.toLowerCase().includes(lowerKeyword)) {
                            results.push({
                                type: 'history',
                                categoryIndex: catIndex,
                                sectionIndex: category.children.indexOf(section),
                                itemIndex: itemIndex,
                                text: item.name
                            });
                        }
                    });
                });
            });

            // æœç´¢å½“å‘¨æ•°æ®
            weeklyData.forEach((item, index) => {
                if (item.description.toLowerCase().includes(lowerKeyword)) {
                    results.push({
                        type: 'weekly',
                        index: index,
                        text: item.description
                    });
                }
            });

            const resultsContainer = document.getElementById('searchResults');
            resultsContainer.innerHTML = '';
            
            if (results.length === 0) {
                resultsContainer.innerHTML = '<div style="padding: 10px; color: #666;">æœªæ‰¾åˆ°åŒ¹é…ç»“æœ</div>';
                return;
            }

            results.forEach(result => {
                const div = document.createElement('div');
                div.style.padding = '10px';
                div.style.borderBottom = '1px solid #eee';
                div.style.cursor = 'pointer';
                div.style.transition = 'background 0.2s';
                div.innerHTML = result.text.replace(new RegExp(keyword, 'gi'), match => 
                    `<span style="background: #ffeb3b; padding: 2px 4px; border-radius: 3px;">${match}</span>`
                );
                
                div.addEventListener('click', () => {
                    scrollToResult(result);
                });
                
                resultsContainer.appendChild(div);
            });
        }

        function scrollToResult(result) {
            if (result.type === 'history') {
                // å¼ºåˆ¶åˆ‡æ¢åˆ°å†å²çƒ­åº¦æ¦œ
                showHistoryHeat();
                
                // ç­‰å¾…DOMæ›´æ–°å®Œæˆåæ‰§è¡Œæ»šåŠ¨
                setTimeout(() => {
                    const categories = document.querySelectorAll('.category');
                    if (categories[result.categoryIndex]) {
                        const category = categories[result.categoryIndex];
                        const itemList = category.querySelector('.item-list');
                        
                        // ç¡®ä¿åˆ†ç±»å±•å¼€
                        itemList.style.display = 'block';
                        category.classList.add('expanded');
                    
                        // æ»šåŠ¨åˆ°ç›®æ ‡ä½ç½®
                        const targetItem = itemList.querySelectorAll('.item')[result.itemIndex];
                        if (targetItem) {
                            targetItem.style.animation = 'highlight 1.5s ease';
                            targetItem.scrollIntoView({ behavior: 'smooth', block: 'center' });
                            
                            setTimeout(() => {
                                targetItem.style.animation = '';
                            }, 1500);
                        }
                    }
                }, 50); // ç»™DOMæ›´æ–°ç•™å‡ºæ—¶é—´
            } else if (result.type === 'weekly') {
                // å¤„ç†å½“å‘¨æ•°æ®è·³è½¬
                showWeeklyHeat(); // åˆ‡æ¢åˆ°å½“å‘¨çƒ­åº¦æ¦œ
                const weeklyItems = document.querySelectorAll('#weeklyList .weekly-item');
                if (weeklyItems[result.index]) {
                    weeklyItems[result.index].style.animation = 'highlight 1.5s ease';
                    weeklyItems[result.index].scrollIntoView({ behavior: 'smooth', block: 'center' });
                    
                    setTimeout(() => {
                        weeklyItems[result.index].style.animation = '';
                    }, 1500);
                }
            }
        }

        // æ·»åŠ æœç´¢è¾“å…¥ç›‘å¬
        document.getElementById('searchInput').addEventListener('input', function(e) {
            const keyword = e.target.value.trim();
            if (keyword.length > 1) {
                performSearch(keyword);
            } else {
                document.getElementById('searchResults').innerHTML = '';
            }
        });

        // æ·»åŠ é«˜äº®åŠ¨ç”»
        const style = document.createElement('style');
        style.textContent = `
            @keyframes highlight {
                0% { background: #ffeb3b; }
                100% { background: transparent; }
            }
        `;
        document.head.appendChild(style);

        // åˆå§‹åŒ–
        initCategorySelect();

        // ç»˜åˆ¶æ‰‡å½¢å›¾


        const ctx = document.getElementById('pieChart').getContext('2d');
        new Chart(ctx, {

            type: 'pie',
            data: {
              labels: [

                    'ä»£ç é£æ ¼ä¸å¯è¯»æ€§',    // 31
                    'ä»£ç ç»“æ„ä¸ç»„ç»‡',      // 10


                    'ä»£ç ç»´æŠ¤ä¸é‡æ„',      // 7


                    'æ§åˆ¶ç»“æ„ä¸é€»è¾‘ä¼˜åŒ–',  // 6
                    'æ—¥å¿—ä¸ç›‘æ§',          // 5

                    'å®‰å…¨æ€§ä¸å¥å£®æ€§',      // 4


                    'èµ„æºç®¡ç†ä¸ç”Ÿå‘½å‘¨æœŸ',  // 4
                    'åè®®ä¸æ¥å£è®¾è®¡',      // 4

                    'è·¨å¹³å°ä¸å…¼å®¹æ€§',      // 4
                    'UIä¸èµ„æºç®¡ç†',        // 4

                    'æ€§èƒ½ä¸æ•ˆç‡',          // 3



                    'æ•°æ®ç¼“å­˜ä¸å¤„ç†'       // 3
                ],
                datasets: [{



                    data: [31, 10, 7, 6, 5, 4, 4, 4, 4, 4, 3, 3],
                    backgroundColor: [

                        '#FF6384', // çº¢ç²‰è‰²
                        '#FFCE56', // é»„è‰²


                        '#E74C3C', // çº¢è‰²


                        '#4BC0C0', // é’ç»¿è‰²
                        '#2ECC71', // ç»¿è‰²


                        '#36A2EB', // è“è‰²

                        '#9966FF', // ç´«è‰²
                        '#3498DB', // å¤©è“è‰²

                        '#F1C40F', // é‡‘é»„è‰²


                        '#E67E22', // æ·±æ©™è‰²


                        '#FF9F40', // æ©™è‰²
                        '#8E44AD'  // æ·±ç´«è‰²

                    ],
                    borderWidth: 1
                }]

            },
            options: {

                responsive: true,
                plugins: {
                    legend: {
                        position: 'right',
                        labels: {
                            font: {

                                family: '"Microsoft YaHei", sans-serif'
                            }
                        }
                    },

                    title: {
                        display: true,


                        text: 'Code Review é—®é¢˜åˆ†å¸ƒ',

                        font: {
                            size: 16,

                            family: '"Microsoft YaHei", sans-serif'
                        }
                    },
                    tooltip: {

                        callbacks: {

                            label: function(context) {
                                const label = context.label || '';
                                const value = context.parsed || 0;

                                const total = context.dataset.data.reduce((a, b) => a + b, 0);



                                const percentage = ((value / total) * 100).toFixed(1);

                                return `${label}: ${value}æ¬¡ (${percentage}%)`;
                            }
                        }
                    }
                }

            }
        });
    </script>

</body>
</html>

</html>

